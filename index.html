<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Alpha Screener</title>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
<style>
body { font-family: Arial; background: #fff; margin: 20px; }
button { padding: 10px 20px; font-size: 16px; }
.card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; }
.notice { background: #fff3cd; padding: 10px; margin-bottom: 10px; }
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
function App() {
  const [capital, setCapital] = React.useState(50000);
  const [universe, setUniverse] = React.useState("NIFTY50");
  const [loading, setLoading] = React.useState(false);
  const [data, setData] = React.useState(null);
  const API = "https://YOUR_BACKEND_URL/api";

  const scan = async () => {
    setLoading(true);
    setData(null);
    try {
      const res = await fetch(API + "/scan", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ capital, universe })
      });
      const json = await res.json();
      setData(json);
    } catch {
      alert("Backend not reachable");
    }
    setLoading(false);
  };

  return (
    <div>
      <h2>âš¡ Alpha Screener</h2>

      <div className="notice">
        Best time to scan: <b>10:45 AM â€“ 1:30 PM IST</b><br/>
        You may scan anytime, but results may vary.
      </div>

      <div>
        Capital â‚¹:
        <input value={capital} onChange={e => setCapital(e.target.value)} />
      </div>

      <div>
        Universe:
        <select onChange={e => setUniverse(e.target.value)}>
          <option value="NIFTY50">NIFTY-50</option>
          <option value="MIDCAP">MIDCAP</option>
        </select>
      </div>

      <br/>
      <button onClick={scan}>ðŸš€ Scan Market</button>

      {loading && <p>Scanningâ€¦ please wait</p>}

      {data && data.status === "NO_TRADE" && (
        <p>No valid setups today. This is OK.</p>
      )}

      {data && data.results && data.results.map((s, i) => (
        <div className="card" key={i}>
          <b>{s.symbol}</b><br/>
          Price: â‚¹{s.price}<br/>
          Target: â‚¹{s.target}<br/>
          Stop: â‚¹{s.stop}<br/>
          Qty: {s.quantity}<br/>
          Max Profit: â‚¹{s.maxProfit}<br/>
          Max Loss: â‚¹{s.maxLoss}
        </div>
      ))}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App />);
</script>
</body>
</html>
